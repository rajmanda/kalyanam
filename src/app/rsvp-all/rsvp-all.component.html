<div class="container">
  <h2>RSVP for Events</h2>

  <table mat-table [dataSource]="events" class="mat-elevation-z8 compact-table" *ngIf="events.length > 0">
    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Name </th>
      <td mat-cell *matCellDef="let event"> {{ event.name }} </td>
    </ng-container>

    <!-- Date Column -->
    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef> Date </th>
      <td mat-cell *matCellDef="let event"> {{ event.date }} </td>
    </ng-container>

    <!-- Adults Column -->
    <ng-container matColumnDef="adults">
      <th mat-header-cell *matHeaderCellDef class="compact-header"> Adults </th>
      <td mat-cell *matCellDef="let event" class="compact-cell">
        <mat-form-field appearance="outline" class="compact-field">
          <mat-select [(ngModel)]="event.adults" class="compact-select">
            <mat-option *ngFor="let num of adultOptions" [value]="num">{{ num }}</mat-option>
          </mat-select>
        </mat-form-field>
      </td>
    </ng-container>

    <!-- Children Column -->
    <ng-container matColumnDef="children">
      <th mat-header-cell *matHeaderCellDef class="compact-header"> Children </th>
      <td mat-cell *matCellDef="let event" class="compact-cell">
        <mat-form-field appearance="outline" class="compact-field">
          <mat-select [(ngModel)]="event.children" class="compact-select">
            <mat-option *ngFor="let num of childrenOptions" [value]="num">{{ num }}</mat-option>
          </mat-select>
        </mat-form-field>
      </td>
    </ng-container>

    <!-- Guest Column -->
    <ng-container matColumnDef="guest">
      <th mat-header-cell *matHeaderCellDef> Guest Name </th>
      <td mat-cell *matCellDef="let event">
        <mat-form-field appearance="outline">
          <input matInput [(ngModel)]="event.forGuest" placeholder="Guest name">
        </mat-form-field>
      </td>
    </ng-container>

    <!-- Comments Column -->
    <ng-container matColumnDef="comments">
      <th mat-header-cell *matHeaderCellDef> Comments </th>
      <td mat-cell *matCellDef="let event">
        <mat-form-field appearance="outline">
          <textarea matInput [(ngModel)]="event.comments" placeholder="Comments"></textarea>
        </mat-form-field>
      </td>
    </ng-container>

    <!-- Header and Row definitions -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>
  </table>

  <div *ngIf="events.length === 0" class="no-data">
    No events available.
  </div>

  <div class="submit-button-container">
    <button mat-raised-button
            color="primary"
            (click)="submitRSVP()"
            class="submit-button">
      Submit RSVP
    </button>
  </div>
</div>
